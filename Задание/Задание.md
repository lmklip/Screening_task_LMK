Техническое задание: разработать решение: "OrderManager — мини-система заказов"

Цель: за 2 модуля разработать минимально жизнеспособную систему управления заказами для малого интернет-магазина: от проектирования данных и импорта CSV до реализации API, простого фронтенда и отчётов.

---
## Содержимое раздатки 
- products.csv — каталог товаров (300 записей). Поля: product_id, name, category, price, stock.
- customers.csv — список клиентов (200 записей). Поля: customer_id, name, email, phone.
- sample_orders.csv — образцы заказов (50 записей). Поля: order_id, customer_id, order_date, total_amount, items (JSON).
- TASK_FINAL.md — этот файл с подробным ТЗ.
- README_template.md.

---
## Общие правила конкурса
- Сдача: финальный репозиторий на локальной платформе (каталоги проекта).
- Запрещено: использование внешних API (интернет); допустимо использовать любые библиотеки.

---
## Модуль 1  — проектирование, импорт данных, API
### 1) Проектирование 
- Проанализировать CSV и составить ERD: минимальные сущности `customers`, `products`, `categories`, `orders`, `order_items`.
- Выдать 3 сценария использования (use-cases), короткий wireframe формы создания заказа.
**Выход:** ERD (PNG/скрин) + short_spec.md (макс 1 страница).

### 2) Подготовка и импорт данных 
- Написать скрипт для чтения `products.csv` и `customers.csv` и загрузки в БД (в зависимости от выбранного стека).
- Обработать: пустые поля, дубликаты по product_id/customer_id, некорректные цены/типы. Описать решения в comments или README.
**Выход:** import_data.* + дамп БД или инструкция как поднять БД.

**Требования к скрипту импотра:**
- Idempotent - повторный запуск не должен дублировать данные (должен обновлять/пропускать существующие записи).
- Журнал ошибок: сохранять problematic_rows.log с описанием ошибки и причине пропуска.

### 3) Мини-API 
Реализовать REST API с минимум следующей функциональностью:
- `GET /products` — листинг с пагинацией (`?page=1&per_page=20`) и фильтрами `category`, `price_min`, `price_max`.
- `POST /orders` — создание заказа. Тело: `{ "customer_id": int, "items": [{"product_id": int, "qty": int}, ...] }`.
  - Поведение: проверка существования customer и product, проверка доступности `stock`, вычисление `total_amount`, списание `stock` (если применимо), создание записи в `orders` и `order_items`.
  - Возвращать 400 с описанием валидации при ошибках.
- `GET /orders/{id}` — подробность заказа, включая позиции и данные клиента.

**Логирование:** минимально — запись всех POST/PUT запросов и ошибок в лог-файл `app.log`.

**Выход:** рабочий сервер, curl-скрипты для демонстрации (например: `curl -X POST -H "Content-Type: application/json" ...`).

---
## Модуль 2 — фронтенд, отчёты, тесты, документация
### 1) Frontend + отчёты 
- Реализовать простую страницу с двумя разделами:
  - **Order Form** — позволяет выбрать клиента (по email/ID) и добавить несколько товаров, указать количество, отправить заказ.
  - **Reports** — две визуализации:
    - **Top 5 products** по количеству проданных товаров (гистограмма).
    - **Revenue by date** (график) — агрегировать по датам из `orders`.
- Приложение должно работать офлайн с локальными скриптами.
**Выход:** frontend в /frontend, инструкции по запуску.

### 2) Тесты и чек-листы 
- Подготовить минимум 5 ручных тест-кейсов (в шаблоне есть пример).
- Реализовать 1 автоматизированный смоук-тест для API.
**Выход:** test_cases.md, tests/ (с авто-тестом).

### 3) Документация и презентация
- README.md — как поднять проект локально, структура репозитория, примеры запросов.
- user_guide.md — краткая инструкция для конечного пользователя «как оформить заказ».
- slides.pdf — 5 слайдов: цель, архитектура, демо-скриншоты, результаты, дальнейшие улучшения.
**Выход:** README.md, user_guide.md, slides.pdf в корне репозитория.

---
## Критерии сдачи и проверка
- Репозиторий содержит папку `/deliverable` с backend, frontend, data, README, тестами и slides.
- Скрипт импорта запускается и создает БД или дамп с корректными таблицами.
- API проходит ручное тестирование эксперта (создание заказа, просмотр, отчёты).

---
## Рекомендации по реализации
- Делайте ровно тот функционал, что требуется.
- Обязательно обработайте валидацию входных данных и ошибки (со статусами).
- Для хранения items в `sample_orders.csv` используется JSON-строка; при импорте её нужно распарсить.

Удачи!